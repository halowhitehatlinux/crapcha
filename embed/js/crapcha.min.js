var crapcha={init:function(e){var t='<div class="code"></div><div class="control"><input type="text" maxlength="20" placeholder="Type the text above"></input><label><span class="icon-021 reload btn"></span><a class="icon-05a info btn" href="http://crapcha.com" target="_blank" tabindex="-1"></a> <span class="logo">CRAPCHA<sup>&trade;</sup></span></label></div>';e.append(t).children(".control").children("input").keypress(this.send).end().find(".reload").css("user-select","none").click(function(){crapcha.populate(e)});this.populate(e)},populate:function(e){var t=e.children(".code"),n=this.generate(5);t.empty();for(var r=0;r<n.length;r++)n[r].length===5?t.append("<span>&#x"+n[r]+";</span>"):n[r].length===3&&t.append('<span class="icon-'+n[r]+'"></span>');t.children().each(this.distort)},generate:function(e){var t=[],n,r;for(var i=0;i<e;i++){r=Math.random();if(r>.4){n=this.randomize(382).toString(16);n=this.pad([n,5])}else if(r>.2){n=this.randomize(12351).toString(16);n=this.pad([n,5])}else{n=this.randomize(270).toString(15);n=this.pad([n,3])}t.push(n)}return t},distort:function(e){var t=$(this).parent().children().length,n=parseInt($(this).parent().height(),10);$(this).css({left:8+100*e/t+"%",position:"absolute","font-size":n-crapcha.randomize(20)+"px",transform:"rotateY("+crapcha.randomize(70)+"deg) rotate("+crapcha.randomize(360)+"deg)","user-select":"none"})},send:function(e){if(e.which==13&&$(this).val()&&$(this).val()!==crapcha.attempt){crapcha.attempt=$(this).val().substring(0,20);var t=$(this).parent().parent().children(".code");if(t.children("span").size()===t.find("*").size()&&t.find("[onload], [onunload], [onclick], [onmouseover], [onmouseout], [onmousedown], [onmouseup]").size()===0){Parse.initialize("2moOiQhfPeRV59WOjc08sOXoIak22aXviq8WCAuD","U2xgNLNQYzWy6iabH3YPwdKp4GOhEcWDPlTBFzvC");var n=Parse.Object.extend("Record"),r=new n;r.set("captcha",t.html());r.set("attempt",crapcha.attempt);r.save()}$(this).val("");crapcha.populate($(this).parent().parent())}},randomize:function(e){return Math.floor(Math.random()*e)},pad:function(e){var t="00000"+e[0];return t.substr(t.length-e[1])}};crapcha.init($(".crapcha"));